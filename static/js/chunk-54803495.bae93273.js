(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54803495"],{6724:function(e,t,i){"use strict";i("8d41");var n="@@wavesContext";function a(e,t){function i(i){var n=Object.assign({},t.value),a=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),s=a.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var l=s.getBoundingClientRect(),o=s.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":(o=document.createElement("span"),o.className="waves-ripple",o.style.height=o.style.width=Math.max(l.width,l.height)+"px",s.appendChild(o)),a.type){case"center":o.style.top=l.height/2-o.offsetHeight/2+"px",o.style.left=l.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(i.pageY-l.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(i.pageX-l.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=a.color,o.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=i:e[n]={removeHandle:i},i}var s={bind:function(e,t){e.addEventListener("click",a(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[n].removeHandle,!1),e.addEventListener("click",a(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[n].removeHandle,!1),e[n]=null,delete e[n]}},l=function(e){e.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(l)),s.install=l;t["a"]=s},"7b62":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:e.$t("table.searchTitle")},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.pager.pager.pageNumber=1,e.loadData()}},model:{value:e.listQuery.searchKey,callback:function(t){e.$set(e.listQuery,"searchKey",t)},expression:"listQuery.searchKey"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.pager.pager.pageNumber=1,e.loadData()}},slot:"append"})],1),e._v(" "),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["permission.add"],expression:"['permission.add']"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v(e._s(e.$t("table.add")))]),e._v(" "),e.multipleSelection.length>0?i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["permission.delete"],expression:"['permission.delete']"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.handleDeleteSelected(e.multipleSelection)}}},[e._v(e._s(e.$t("table.delete")))]):e._e()],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"header-row-class-name":"table-header-hightlight",data:e.pager.dataList,fit:""},on:{"selection-change":function(t){e.multipleSelection=t}}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("table.name"),align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("table.group"),align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.group))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("table.description"),align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.description))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("table.type")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:t.row.installed?"success":"danger","close-transition":""}},[e._v(e._s(t.row.installed?e.$t("table.installed"):e.$t("table.custom"))+"\n        ")])]}}])}),e._v(" "),e.checkPermission(["permission.edit","permission.delete"])?i("el-table-column",{attrs:{label:e.$t("table.actions"),align:"left",width:"120","class-name":"small-padding"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{directives:[{name:"default-html",rawName:"v-default-html",value:"无",expression:"'无'"}]},[i("el-link",{directives:[{name:"permission",rawName:"v-permission",value:["permission.edit"],expression:"['permission.edit']"}],staticClass:"el-icon-edit",attrs:{type:"primary"},on:{click:function(i){return e.handleUpdate(t.row)}}},[e._v(e._s(e.$t("table.edit")))]),e._v(" "),t.row.installed?e._e():i("el-link",{directives:[{name:"permission",rawName:"v-permission",value:["permission.delete"],expression:"['permission.delete']"}],staticClass:"el-icon-delete",attrs:{type:"danger"},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v(e._s(e.$t("table.delete"))+"\n          ")])],1)]}}],null,!1,3482859590)}):e._e()],1),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.pager.pager.recordCount>0,expression:"pager.pager.recordCount>0"}],attrs:{"current-page":e.pager.pager.pageNumber,"page-sizes":[10,15,20,30,50,99],"page-size":e.pager.pager.pageSize,total:e.pager.pager.recordCount,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.pager.pager,"pageNumber",t)},"update:current-page":function(t){return e.$set(e.pager.pager,"pageNumber",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("el-dialog",{directives:[{name:"permission",rawName:"v-permission",value:["permission.add","permission.edit"],expression:"['permission.add','permission.edit']"}],attrs:{title:0==e.permission.id?e.$t("table.add"):e.$t("table.edit"),visible:e.addEditShow,width:"480px"},on:{"update:visible":function(t){e.addEditShow=t}}},[e.addEditShow?i("el-form",{ref:"editForm",staticStyle:{width:"400px"},attrs:{model:e.permission,rules:e.formRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:e.$t("table.group"),prop:"group"}},[i("el-input",{attrs:{maxlength:500,disabled:e.permission.installed,autosize:{minRows:1,maxRows:2},type:"textarea","auto-complete":"off",placeholder:""+e.$t("placeholder.pleaseInput")+e.$t("table.group"),"suffix-icon":"el-icon-fa-file-word-o"},model:{value:e.permission.group,callback:function(t){e.$set(e.permission,"group",t)},expression:"permission.group"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("table.name"),prop:"name"}},[i("el-input",{attrs:{disabled:e.permission.installed,"auto-complete":"off",placeholder:""+e.$t("placeholder.pleaseInput")+e.$t("table.name"),"suffix-icon":"el-icon-fa-vcard"},model:{value:e.permission.name,callback:function(t){e.$set(e.permission,"name",t)},expression:"permission.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("table.description"),prop:"description"}},[i("el-input",{attrs:{maxlength:500,disabled:e.permission.installed,autosize:{minRows:1,maxRows:2},type:"textarea","auto-complete":"off",placeholder:""+e.$t("placeholder.pleaseInput")+e.$t("table.description"),"suffix-icon":"el-icon-fa-file-word-o"},model:{value:e.permission.description,callback:function(t){e.$set(e.permission,"description",t)},expression:"permission.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("table.tips"),prop:"intro"}},[i("el-input",{attrs:{maxlength:500,autosize:{minRows:2,maxRows:4},type:"textarea","auto-complete":"off",placeholder:""+e.$t("placeholder.pleaseInput")+e.$t("table.tips"),"suffix-icon":"el-icon-fa-file-word-o"},model:{value:e.permission.intro,callback:function(t){e.$set(e.permission,"intro",t)},expression:"permission.intro"}})],1)],1):e._e(),e._v(" "),i("div",{staticStyle:{paddingRight:"40px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addEditShow=!1,e.permission={installed:!1}}}},[e._v(e._s(e.$t("table.cancel")))]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updatePermission("editForm")}}},[e._v(e._s(e.$t("table.confirm")))])],1)],1)],1)},a=[],s=(i("5df3"),i("7f7f"),i("ac6a"),i("ed08")),l=i("e350"),o=i("6724"),r=i("b4d4"),c=i("ec50"),d=i("365c"),p={name:"Permission",directives:{waves:o["a"],defaultHtml:r["a"]},filters:{},data:function(){return{listLoading:!0,listQuery:{searchKey:""},formRules:c["a"],pager:{pager:{pageCount:0,pageNumber:1,pageSize:this.$store.getters.pageSize,recordCount:0}},selected:[],permissionListString:"",addEditShow:!1,permission:{id:0,name:"",description:"",installed:!1},multipleSelection:[]}},computed:{dialogWidth:function(){return 59e3/Object(s["windowWidth"])()+"%"}},watch:{options:function(){var e=this;this.selected=[],this.options.forEach((function(t){t.selected&&e.selected.push(t.key)}))}},mounted:function(){this.loadData()},methods:{checkPermission:l["a"],handleCurrentChange:function(){this.loadData()},handleSizeChange:function(e){this.pager.pager.pageSize=e,this.$store.commit("SET_PAGESIZE",e),this.loadData()},handleCreate:function(){this.permission={id:0,name:"",description:"",installed:!1},this.addEditShow=!0},updatePermission:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var i=function(e){t.handleCurrentChange(),t.addEditShow=!1,t.$message({type:"success",message:(t.permission.id?"编辑":"添加")+"成功!"})};t.permission.id?d["a"].Permission.update(t.permission).then(i):d["a"].Permission.save(t.permission).then(i)}}))},handleUpdate:function(e){this.permission=Object(s["deepClone"])(e),this.addEditShow=!0},handleDelete:function(e){var t=this;this.$confirm("".concat(this.$t("table.confirm")," ").concat(this.$t("table.delete")," <").concat(e.name,"> ?"),this.$t("table.deleteConfirm"),{confirmButtonText:this.$t("table.confirm"),cancelButtonText:this.$t("table.cancel"),type:"warning"}).then((function(){d["a"].Permission.delete(e.id).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.loadData()}))}))},handleDeleteSelected:function(e){var t=this;0!==e.length&&this.$confirm("".concat(this.$t("table.confirm")," ").concat(this.$t("table.delete")," <").concat(e.map((function(e){return e.name})).join(","),"> ?"),this.$t("table.deleteConfirm"),{confirmButtonText:this.$t("table.confirm"),cancelButtonText:this.$t("table.cancel"),type:"warning"}).then((function(){Promise.all(e.map((function(e){return d["a"].Permission.delete(e.id)}))).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.loadData()}))}))},loadData:function(){var e=this;d["a"].Permission.list(this.pager.pager.pageNumber,this.pager.pager.pageSize,this.listQuery.searchKey).then((function(t){e.pager=t.pager,e.listLoading=!1}))}}},u=p,m=i("2877"),f=Object(m["a"])(u,n,a,!1,null,null,null);t["default"]=f.exports},"8d41":function(e,t,i){},b4d4:function(e,t,i){"use strict";i("6762"),i("2fdb");var n={bind:function(e,t,i){var n=t.value,a=function(){["BODY","DIV","SPAN","LABEL","TD","TH","B","DD","DT"].includes(e.nodeName)&&""===e.innerHTML.trim()&&(e.innerHTML=n||"无")};setTimeout(a,10)}},a=function(e){e.directive("el-default-html",n)};window.Vue&&(window["el-default-html"]=n,Vue.use(a)),n.install=a;t["a"]=n}}]);