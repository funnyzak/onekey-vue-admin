(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22225126"],{6724:function(e,t,a){"use strict";a("8d41");var n="@@wavesContext";function i(e,t){function a(a){var n=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),l=i.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var s=l.getBoundingClientRect(),o=l.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":(o=document.createElement("span"),o.className="waves-ripple",o.style.height=o.style.width=Math.max(s.width,s.height)+"px",l.appendChild(o)),i.type){case"center":o.style.top=s.height/2-o.offsetHeight/2+"px",o.style.left=s.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(a.pageY-s.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(a.pageX-s.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=i.color,o.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=a:e[n]={removeHandle:a},a}var l={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[n].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[n].removeHandle,!1),e[n]=null,delete e[n]}},s=function(e){e.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(s)),l.install=s;t["a"]=l},7424:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:e.$t("table.searchTitle")},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.pager.pager.pageNumber=1,e.loadData()}},model:{value:e.listQuery.searchKey,callback:function(t){e.$set(e.listQuery,"searchKey",t)},expression:"listQuery.searchKey"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.pager.pager.pageNumber=1,e.loadData()}},slot:"append"})],1),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["config.add"],expression:"['config.add']"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v(e._s(e.$t("table.add")))]),e._v(" "),e.multipleSelection.length>0?a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["config.delete"],expression:"['config.delete']"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.handleDeleteSelected(e.multipleSelection)}}},[e._v(e._s(e.$t("table.delete")))]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"header-row-class-name":"table-header-hightlight",data:e.pager.dataList,fit:""},on:{"selection-change":function(t){e.multipleSelection=t}}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.name"),align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.value"),"show-overflow-tooltip":"",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.value))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.description"),width:"300","show-overflow-tooltip":"",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.description))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.type")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.installed?"success":"danger","close-transition":""}},[e._v(e._s(t.row.installed?e.$t("table.installed"):e.$t("table.custom"))+"\n        ")])]}}])}),e._v(" "),e.checkPermission(["config.edit","config.delete"])?a("el-table-column",{attrs:{label:e.$t("table.actions"),align:"left",width:"120","class-name":"small-padding"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{directives:[{name:"default-html",rawName:"v-default-html",value:"无",expression:"'无'"}]},[a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:["config.edit"],expression:"['config.edit']"}],staticClass:"el-icon-edit",attrs:{type:"primary"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v(e._s(e.$t("table.edit")))]),e._v(" "),t.row.installed?e._e():a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:["config.delete"],expression:"['config.delete']"}],staticClass:"el-icon-delete",attrs:{type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(e._s(e.$t("table.delete"))+"\n          ")])],1)]}}],null,!1,2388364038)}):e._e()],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.pager.pager.recordCount>0,expression:"pager.pager.recordCount>0"}],attrs:{"current-page":e.pager.pager.pageNumber,"page-sizes":[10,15,20,30,50,99],"page-size":e.pager.pager.pageSize,total:e.pager.pager.recordCount,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.pager.pager,"pageNumber",t)},"update:current-page":function(t){return e.$set(e.pager.pager,"pageNumber",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{directives:[{name:"permission",rawName:"v-permission",value:["config.add","config.edit"],expression:"['config.add', 'config.edit']"}],attrs:{title:0==e.setting.id?e.$t("table.add"):e.$t("table.edit"),visible:e.addEditShow,width:"480px"},on:{"update:visible":function(t){e.addEditShow=t}}},[a("el-form",{ref:"editForm",staticStyle:{width:"400px"},attrs:{model:e.setting,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:e.$t("table.name"),prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:""+e.$t("placeholder.pleaseInput")+e.$t("table.name"),"suffix-icon":"el-icon-fa-vcard"},model:{value:e.setting.name,callback:function(t){e.$set(e.setting,"name",t)},expression:"setting.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("table.value"),prop:"value"}},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:8},"auto-complete":"off",type:"textarea",placeholder:""+e.$t("placeholder.pleaseInput")+e.$t("table.value"),"suffix-icon":"el-icon-fa-terminal"},model:{value:e.setting.value,callback:function(t){e.$set(e.setting,"value",t)},expression:"setting.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("table.description"),prop:"description"}},[a("el-input",{attrs:{maxlength:500,autosize:{minRows:4,maxRows:8},type:"textarea","auto-complete":"off",placeholder:""+e.$t("placeholder.pleaseInput")+e.$t("table.description"),"suffix-icon":"el-icon-fa-file-word-o"},model:{value:e.setting.description,callback:function(t){e.$set(e.setting,"description",t)},expression:"setting.description"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addEditShow=!1,e.setting={installed:!1}}}},[e._v(e._s(e.$t("table.cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateSetting("editForm")}}},[e._v(e._s(e.$t("table.confirm")))])],1)],1)],1)},i=[],l=(a("5df3"),a("7f7f"),a("ac6a"),a("ed08")),s=a("e350"),o=a("6724"),r=a("b4d4"),c=a("ec50"),d=a("365c"),u={name:"SettingList",directives:{waves:o["a"],defaultHtml:r["a"]},filters:{},data:function(){return{listLoading:!0,listQuery:{searchKey:""},formRules:c["a"],pager:{pager:{pageCount:0,pageNumber:1,pageSize:this.$store.getters.pageSize,recordCount:0}},selected:[],addEditShow:!1,setting:{id:0,name:"",description:"",installed:!1},multipleSelection:[]}},computed:{dialogWidth:function(){return 59e3/Object(l["windowWidth"])()+"%"}},watch:{options:function(){var e=this;this.selected=[],this.options.forEach((function(t){t.selected&&e.selected.push(t.key)}))}},mounted:function(){this.loadData()},methods:{checkPermission:s["a"],handleCurrentChange:function(){this.loadData()},handleSizeChange:function(e){this.pager.pager.pageSize=e,this.$store.commit("SET_PAGESIZE",e),this.loadData()},handleCreate:function(){this.setting={id:0,name:"",description:"",installed:!1},this.addEditShow=!0},updateSetting:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a=function(e){t.handleCurrentChange(),t.addEditShow=!1,t.$message({type:"success",message:(t.setting.id?"编辑":"添加")+"成功!"})};t.setting.id?d["a"].Setting.update(t.setting).then(a):d["a"].Setting.save(t.setting).then(a)}}))},handleUpdate:function(e){this.setting=Object(l["deepClone"])(e),this.addEditShow=!0},handleDelete:function(e){var t=this;this.$confirm("".concat(this.$t("table.confirm")," ").concat(this.$t("table.delete")," <").concat(e.name,"> ?"),this.$t("table.deleteConfirm"),{confirmButtonText:this.$t("table.confirm"),cancelButtonText:this.$t("table.cancel"),type:"warning"}).then((function(){d["a"].Setting.delete(e.id).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.loadData()}))}))},handleDeleteSelected:function(e){var t=this;0!==e.length&&this.$confirm("".concat(this.$t("table.confirm")," ").concat(this.$t("table.delete")," <").concat(e.map((function(e){return e.name})).join(","),"> ?"),this.$t("table.deleteConfirm"),{confirmButtonText:this.$t("table.confirm"),cancelButtonText:this.$t("table.cancel"),type:"warning"}).then((function(){Promise.all(e.map((function(e){return d["a"].Setting.delete(e.id)}))).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.loadData()}))}))},loadData:function(){var e=this;d["a"].Setting.list(this.pager.pager.pageNumber,this.pager.pager.pageSize,this.listQuery.searchKey).then((function(t){e.pager=t.pager,e.listLoading=!1}))}}},p=u,f=a("2877"),m=Object(f["a"])(p,n,i,!1,null,null,null);t["default"]=m.exports},"8d41":function(e,t,a){},b4d4:function(e,t,a){"use strict";a("6762"),a("2fdb");var n={bind:function(e,t,a){var n=t.value,i=function(){["BODY","DIV","SPAN","LABEL","TD","TH","B","DD","DT"].includes(e.nodeName)&&""===e.innerHTML.trim()&&(e.innerHTML=n||"无")};setTimeout(i,10)}},i=function(e){e.directive("el-default-html",n)};window.Vue&&(window["el-default-html"]=n,Vue.use(i)),n.install=i;t["a"]=n}}]);